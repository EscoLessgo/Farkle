<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farkle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <header class="game-header">
            <h1>Farkle</h1>
            <button id="rules-btn" class="icon-btn" aria-label="Rules">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
            </button>
        </header>

        <main class="game-board">
            <div class="player-zones">
                <div id="player1-zone" class="player-card active">
                    <div class="player-info">
                        <span class="player-name">Player 1</span>
                        <span class="total-score">0</span>
                    </div>
                    <div class="round-stats">
                        <div class="stat">
                            <span class="label">Round</span>
                            <span class="value" id="p1-round">0</span>
                        </div>
                    </div>
                </div>
                <div id="player2-zone" class="player-card">
                    <div class="player-info">
                        <span class="player-name">Player 2</span>
                        <span class="total-score">0</span>
                    </div>
                    <div class="round-stats">
                        <div class="stat">
                            <span class="label">Round</span>
                            <span class="value" id="p2-round">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dice-arena">
                <div id="dice-container" class="dice-container">
                    <!-- Dice will be injected here -->
                </div>
                <div id="feedback-message" class="feedback-message hidden">Farkle!</div>
            </div>

            <div class="controls">
                <div class="current-action-info">
                    <span id="action-text">Roll to start your turn</span>
                    <span id="current-score-display">Roll Score: 0</span>
                </div>
                <div class="button-group">
                    <button id="roll-btn" class="btn primary">Roll Dice</button>
                    <button id="bank-btn" class="btn secondary" disabled>Bank Score</button>
                </div>
            </div>
        </main>

        <!-- Modals -->
        <div id="rules-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Rules</h2>
                <div class="rules-text">
                    <p><strong>Scoring:</strong></p>
                    <ul>
                        <li>Single 5: 50</li>
                        <li>Single 1: 100</li>
                        <li>Three 1s: 1000</li>
                        <li>Three 2s: 200</li>
                        <li>Three 3s: 300</li>
                        <li>Three 4s: 400</li>
                        <li>Three 5s: 500</li>
                        <li>Three 6s: 600</li>
                        <li>Four of a kind: 2x Triple value</li>
                        <li>Five of a kind: 3x Triple value</li>
                        <li>Six of a kind: 4x Triple value</li>
                    </ul>
                    <p><strong>Gameplay:</strong></p>
                    <p>Roll the dice. Select scoring dice to accumulate points. You must select at least one scoring die
                        after each roll to continue or bank.</p>
                    <p><strong>Hot Dice:</strong> If you use all 6 dice, you can roll all 6 again!</p>
                    <p><strong>Farkle:</strong> If you roll and get no scoring dice, you lose your round score.</p>
                    <p><strong>Win:</strong> First to 10,000 points. The other player gets one last turn.</p>
                </div>
                <button class="btn close-modal">Close</button>
            </div>
        </div>

        <div id="setup-modal" class="modal">
            <div class="modal-content">
                <h2>Join / Create Game</h2>
                <div class="input-group">
                    <label>Your Name</label>
                    <input type="text" id="player-name-input" value="Player 1" placeholder="Enter name">
                </div>
                <div class="input-group">
                    <label>Room Code</label>
                    <input type="text" id="room-code-input" value="room1" placeholder="Enter room code">
                </div>
                <button id="start-game-btn" class="btn primary">Join Game</button>
            </div>
        </div>

        <div id="game-over-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Game Over!</h2>
                <p id="winner-text">Player 1 Wins!</p>
                <div class="final-scores">
                    <div class="final-score-row">
                        <span id="end-p1-name"></span>: <span id="end-p1-score"></span>
                    </div>
                    <div class="final-score-row">
                        <span id="end-p2-name"></span>: <span id="end-p2-score"></span>
                    </div>
                </div>
                <button id="restart-btn" class="btn primary">Play Again</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="rules.js"></script>
    <script type="module" src="client.js"></script>
</body>

</html>